<hr>
<h2 id="title-搭建jupyter服务器categories-备忘录tags-小寄巧-真这么干你就等死吧"><a href="#title-搭建jupyter服务器categories-备忘录tags-小寄巧-真这么干你就等死吧" class="headerlink" title="title: 搭建jupyter服务器categories:- 备忘录tags:- 小寄巧- 真这么干你就等死吧"></a>title: 搭建jupyter服务器<br>categories:<br>- 备忘录<br>tags:<br>- 小寄巧<br>- 真这么干你就等死吧</h2><p>随时随地访问jupyter，畅享加班生活。</p>
<!--more-->

<h3 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备"></a>1.准备</h3><ul>
<li>一台服务器</li>
</ul>
<h3 id="2-在服务器上开启服务"><a href="#2-在服务器上开启服务" class="headerlink" title="2.在服务器上开启服务"></a>2.在服务器上开启服务</h3><p>这个网上教程太多了，就不讲了</p>
<p>正常开启是这样的</p>
<img src="image-20231202011936041.png" alt="image-20231202011936041" />

<p>可以看到它开在了本地</p>
<h3 id="3-查看配置文件地址"><a href="#3-查看配置文件地址" class="headerlink" title="3.查看配置文件地址"></a>3.查看配置文件地址</h3><p>————————————————————————————————————</p>
<p>写完了看别人博客的时候才发现根本不用这么麻烦</p>
<p>直接</p>
<pre><code>jupyter notebook --no-browser --ip 0.0.0.0
</code></pre>
<p>就可以把jupyter开在服务器上</p>
<p>直接就可以跳过3、4、5步</p>
<p>————————————————————————————————————</p>
<p>在控制台输入</p>
<pre><code>jupyter notebook –generate-config
</code></pre>
<p>如果是首次输入会在默认目录下生成jupyter的配置文件</p>
<p>如果已经有配置文件了就会询问是否覆盖，同时也会显示出文件的地址</p>
<p><img src="/image-20231202012608960.png" alt="image-20231202012608960"></p>
<h3 id="4-编辑配置文件"><a href="#4-编辑配置文件" class="headerlink" title="4.编辑配置文件"></a>4.编辑配置文件</h3><pre><code>vim /root/.jupyter/jupyter_notebook_config.py
</code></pre>
<p>查找c.NotebookApp.ip</p>
<p><img src="/image-20231202012818266.png" alt="image-20231202012818266"></p>
<p>把前面的注释去掉，然后改为</p>
<pre><code class="python">c.NotebookApp.ip = &#39;0.0.0.0&#39;
</code></pre>
<p>保存退出</p>
<h3 id="5-启动jupyter"><a href="#5-启动jupyter" class="headerlink" title="5.启动jupyter"></a>5.启动jupyter</h3><p><img src="/image-20231202013114450.png" alt="image-20231202013114450"></p>
<p>可以看到这里已经变成了主机名</p>
<p>这时候去防火墙放行端口就可以在服务器上访问jupyter了</p>
<p><img src="/image-20231202013403333.png" alt="image-20231202013403333"></p>
<p><strong>记得带上token</strong></p>
<h3 id="6-配置systemd"><a href="#6-配置systemd" class="headerlink" title="6.配置systemd"></a>6.配置systemd</h3><p>本来这步是没啥必要的</p>
<p>但是自己就是又菜又爱玩，想去试试能不能开这个服务，然后花了好几个小时去倒腾systemd奇怪的环境配置（主要还是被conda被刺了）</p>
<p>最后还是选择直接找到conda环境里的python，然后用绝对路径启动</p>
<p>没用conda的话可以参考：</p>
<p><a href="https://www.cnblogs.com/xkgeng/p/14014858.html">搭建 Jupyter Notebook 服务（基于 Systemd 和 Nginx） - 循环展开 - 博客园 (cnblogs.com)</a></p>
<p>如果<strong>装了conda</strong>，具体步骤如下：</p>
<ol>
<li><p>先确认自己用的conda的环境，如果是base环境python的位置和其他环境的不太一样</p>
</li>
<li><p>找到conda的位置</p>
<p>这里可以用</p>
<pre><code>whereis conda
</code></pre>
<p><img src="/image-20231202030750685.png" alt="image-20231202030750685"></p>
<p>（这里用第一个路径）</p>
</li>
<li><p>找到python的位置</p>
<p>一般base环境的python和conda一样在bin下面</p>
<p>在图上就是**&#x2F;root&#x2F;anaconda3&#x2F;bin&#x2F;python**这个位置</p>
<p>​		 <strong>[conda的安装位置]&#x2F;bin&#x2F;python</strong></p>
<p>如果是其他的环境就在anaconda3下的envs里</p>
<p>我这只新建了一个环境所以只有一个文件夹</p>
<p><img src="/image-20231202031241763.png" alt="image-20231202031241763"></p>
<p>到环境文件夹下的bin里就能看到python程序</p>
<p>在图上就是**&#x2F;root&#x2F;anaconda3&#x2F;envs&#x2F;idsgame&#x2F;bin&#x2F;python**</p>
<p>​		  <strong>[conda的安装位置]&#x2F;envs&#x2F;[环境名]&#x2F;bin&#x2F;python</strong></p>
</li>
<li><p>创建systemd任务</p>
<pre><code>vim /etc/systemd/system/jupyter.service
</code></pre>
<p>向里面写入：<strong>（[ ]中的内容根据自己的实际情况进行替换！！！）</strong></p>
<pre><code>[Unit]
Description = jupyter server
After = network.target syslog.target
Wants = network.target

[Service]
Type = simple
WorkingDirectory=[jupyter开启的根目录]
ExecStart=[python的位置] -m jupyter notebook --allow-root
Restart=always

[Install]
WantedBy = multi-user.target
</code></pre>
</li>
<li><p>启动服务</p>
<pre><code>systemctl start jupyter
</code></pre>
</li>
<li><p>查看状态</p>
<pre><code>systemctl status jupyter
</code></pre>
<p><img src="/image-20231202032141589.png" alt="image-20231202032141589"></p>
<p>绿了就成功了，然后可以从里面看到登录用的token值</p>
</li>
</ol>
